@import "../../src/scss/init";

.page {
  > main {
    contain: paint;
  }
  .block-system-menu-blockmain .nav,
  .block-system-menu-blocktown-hall-menu .nav,
  .block-system-menu-blockfooter .nav,
  .language-switcher {
    --bs-nav-link-color: #{$gray-700};
    --bs-link-color-rgb: #{$gray-700};
    --bs-navbar-active-color: #{$primary};
    --bs-nav-link-hover-color: #{$primary};
    font-family: $headings-font-family;
    font-size: $font-size-base;
  }
  .language-link {
    text-decoration: none;
    font-family: Arial, system-ui;
  }
}

header.header {
  position: sticky;
  top: calc(var(--gin-toolbar-y-offset, 0px) + var(--enviroment-indicator-border-width, 0px));
  z-index: 99;

  .block-system-branding-block {
    max-width: 45%;
  }

  .block-system-menu-blocktown-hall-menu .navbar-nav > .nav-item:first-child > .nav-link[data-drupal-link-system-path="<front>"],
  .block-system-menu-blockmain .navbar-nav > .nav-item:first-child > .nav-link[data-drupal-link-system-path="<front>"] {
    display: none;
  }

  .block-system-menu-blockmain .navbar-nav {
    .dropdown {
      text-align: inherit;
    }
    .dropdown-menu {
      text-align: inherit;
    }
  }

  .dropdown-menu {
    text-align: inherit;
    width: 100%;
    border: 0;
    padding: 0;
    --bs-dropdown-item-padding-y: #{$spacer*.5};
    box-shadow: var(--bs-box-shadow);
  }

  .dropdown-item {
    white-space: normal;
    font-family: Arial, Helvetica, sans-serif;
  }

  .navbar-nav {
    --bs-nav-link-padding-x: #{$spacer};
  }

  .navbar-toggler {
    border: 0;
  }

  .dropdown-toggle-split-link {
    padding-right: 0 !important;
  }

  .dropdown .btn-group {
    flex-wrap: wrap;
    justify-content: center;
  }
}

// Estilos específicos para el header en el home
.page-front header.header {
  position: absolute !important;
  top: 0;
  left: 0;
  right: 0;
  background: transparent !important;
  box-shadow: none !important;

  .navbar {
    background: transparent !important;
  }

  .navbar-brand,
  .nav-link {
    color: white !important;
  }

  .nav-link:hover {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  // Selector de idioma - solo el toggle debe ser blanco
  .language-switcher {
    .language-link.dropdown-toggle {
      color: white !important;
    }

    // Los enlaces dentro del dropdown deben ser oscuros
    .dropdown-menu {
      background: white !important;
      border: 1px solid rgba(0, 0, 0, 0.15);

      a,
      .language-link,
      .dropdown-item {
        color: $gray-700 !important;

        &:hover,
        &:focus {
          color: $primary !important;
          background-color: rgba(0, 0, 0, 0.05);
        }
      }
    }

    // Icono de idioma también en blanco
    .material-symbols-outlined,
    .vlsuite-icon-font-icon {
      color: white !important;
    }
  }

  .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
  }

  .navbar-toggler {
    border-color: rgba(255, 255, 255, 0.5);
  }

  // Logo blanco en el home - ocultar el de color y mostrar solo el blanco
  .navbar-brand__logo {
    position: relative;
    display: inline-block;
    width: 190px;
    height: 46px;

    .navbar-logo-color {
      display: none !important;
    }

    .navbar-logo-white {
      display: block !important;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 10;
    }
  }
}

// Por defecto (fuera del home), mostrar el logo de color y ocultar el blanco
header.header .navbar-brand__logo {
  position: relative;
  display: inline-block;
  width: 190px;
  height: 46px;

  .navbar-logo-white {
    display: none !important;
  }

  .navbar-logo-color {
    display: block !important;
  }
}

// Gradiente oscuro en el hero section para contraste con el header
.page-front .hero-section {
  position: relative;
  overflow: visible; // Asegurar que el gradiente sea visible

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 250px; // Altura del gradiente desde arriba
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.5) 0%,
      rgba(0, 0, 0, 0.35) 30%,
      rgba(0, 0, 0, 0.2) 50%,
      rgba(0, 0, 0, 0.1) 70%,
      transparent 100%
    );
    z-index: 98; // Debajo del header (99) pero encima del contenido
    pointer-events: none; // Permite que los elementos debajo sean clickeables
  }

  // Asegurar que el contenido del hero esté por encima del gradiente
  > * {
    position: relative;
    z-index: 1;
  }
}

// Aplicar gradiente directamente sobre el slider de portada
.page-front .block-views-blockportada-slider-block-1 .slick-slide::before {
  // Sobrescribir el gradiente existente con uno que incluya oscuro arriba
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.6) 0%,
    rgba(0, 0, 0, 0.5) 15%,
    rgba(0, 0, 0, 0.35) 30%,
    rgba(0, 0, 0, 0.2) 50%,
    rgba(0, 0, 0, 0.1) 70%,
    rgba(0, 0, 0, 0.05) 85%,
    rgba(0, 0, 0, 0.3) 95%,
    rgba(0, 0, 0, 0.8) 100%
  ) !important;
  z-index: 99 !important;
}

// Aplicar también sobre otros tipos de slider dentro del hero
.page-front .hero-section .vlsuite-layout,
.page-front .hero-section .slick-slider,
.page-front .hero-section .vlsuite-slider {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 250px;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.6) 0%,
      rgba(0, 0, 0, 0.4) 25%,
      rgba(0, 0, 0, 0.25) 50%,
      rgba(0, 0, 0, 0.1) 75%,
      transparent 100%
    );
    z-index: 98;
    pointer-events: none;
  }
}

footer {
  .logo-footer {
    width: 256px;
  }
}
